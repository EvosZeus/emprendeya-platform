<div class="container">
    <div class="row">
        <div class="card card-space">
            <div class="page-inner">
                <h3 class="fw-bold mb-3">Talleres de Academia</h3>

                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="workshopSearch">Buscar Taller:</label>
                            <input type="text" class="form-control" id="workshopSearch"
                                placeholder="Escribe para buscar talleres...">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="workshopCategoryFilter">Categoría:</label>
                            <select class="form-control" id="workshopCategoryFilter">
                                <option value="all">Todas las Categorías</option>
                                <option value="methodology">Metodología</option>
                                <option value="pitching">Pitching</option>
                                <!-- Add more categories as needed -->
                            </select>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="workshopDateFilter">Fecha (simple):</label>
                            <select class="form-control" id="workshopDateFilter">
                                <option value="all">Cualquier Fecha</option>
                                <option value="2025-04-20">20 de Abril, 2025</option>
                                <option value="2025-05-04">4 de Mayo, 2025</option>
                                <option value="2025-05-18">18 de Mayo, 2025</option>
                                <!-- Add more date options as needed -->
                            </select>
                        </div>
                    </div>
                </div>

                <div class="row" id="workshopList">
                    <!-- Workshop Card 1 -->
                    <div class="col-md-6 col-lg-4 mb-4" data-category="methodology" data-date="2025-04-20"
                        data-title="Taller de Design Thinking"
                        data-description="Aprende a resolver problemas de forma creativa con la metodología Design Thinking.">
                        <div class="card">
                            <img src="assets/img/examples/example4.jpeg" class="card-img-top" alt="Workshop Image">
                            <div class="card-body">
                                <h5 class="card-title fw-bold">Taller de Design Thinking</h5>
                                <p class="card-text">Aprende a resolver problemas de forma creativa con la metodología
                                    Design
                                    Thinking.</p>
                                <a href="#" class="btn btn-primary btn-sm view-details-btn" data-bs-toggle="modal"
                                    data-bs-target="#detailsModal" data-type="workshop"
                                    data-image="assets/img/examples/example4.jpeg"
                                    data-title="Taller de Design Thinking"
                                    data-description="Aprende a resolver problemas de forma creativa con la metodología Design Thinking."
                                    data-extra-info-label="Fecha" data-extra-info-value="20 de Abril, 2025">Ver
                                    Detalles</a>
                            </div>
                            <div class="card-footer">
                                <small class="text-muted">Fecha: 20 de Abril, 2025</small>
                            </div>
                        </div>
                    </div>
                    <!-- Workshop Card 2 -->
                    <div class="col-md-6 col-lg-4 mb-4" data-category="methodology" data-date="2025-05-04"
                        data-title="Taller de Lean Startup"
                        data-description="Valida tu idea de negocio y minimiza riesgos con la metodología Lean Startup.">
                        <div class="card">
                            <img src="assets/img/examples/example5.jpeg" class="card-img-top" alt="Workshop Image">
                            <div class="card-body">
                                <h5 class="card-title fw-bold">Taller de Lean Startup</h5>
                                <p class="card-text">Valida tu idea de negocio y minimiza riesgos con la metodología
                                    Lean Startup.
                                </p>
                                <a href="#" class="btn btn-primary btn-sm view-details-btn" data-bs-toggle="modal"
                                    data-bs-target="#detailsModal" data-type="workshop"
                                    data-image="assets/img/examples/example5.jpeg" data-title="Taller de Lean Startup"
                                    data-description="Valida tu idea de negocio y minimiza riesgos con la metodología Lean Startup."
                                    data-extra-info-label="Fecha" data-extra-info-value="4 de Mayo, 2025">Ver
                                    Detalles</a>
                            </div>
                            <div class="card-footer">
                                <small class="text-muted">Fecha: 4 de Mayo, 2025</small>
                            </div>
                        </div>
                    </div>
                    <!-- Workshop Card 3 -->
                    <div class="col-md-6 col-lg-4 mb-4" data-category="pitching" data-date="2025-05-18"
                        data-title="Taller de Pitch Elevator"
                        data-description="Aprende a comunicar tu idea de negocio de forma concisa e impactante.">
                        <div class="card">
                            <img src="assets/img/examples/example6.jpeg" class="card-img-top" alt="Workshop Image">
                            <div class="card-body">
                                <h5 class="card-title fw-bold">Taller de Pitch Elevator</h5>
                                <p class="card-text">Aprende a comunicar tu idea de negocio de forma concisa e
                                    impactante.</p>
                                <a href="#" class="btn btn-primary btn-sm view-details-btn" data-bs-toggle="modal"
                                    data-bs-target="#detailsModal" data-type="workshop"
                                    data-image="assets/img/examples/example6.jpeg" data-title="Taller de Pitch Elevator"
                                    data-description="Aprende a comunicar tu idea de negocio de forma concisa e impactante."
                                    data-extra-info-label="Fecha" data-extra-info-value="18 de Mayo, 2025">Ver
                                    Detalles</a>
                            </div>
                            <div class="card-footer">
                                <small class="text-muted">Fecha: 18 de Mayo, 2025</small>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Pagination -->
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-center">
                        <li class="page-item disabled">
                            <a class="page-link" href="#" tabindex="-1">Anterior</a>
                        </li>
                        <li class="page-item"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#">Siguiente</a>
                        </li>
                    </ul>
                </nav>
            </div>


            <!-- Details Modal -->
            <div class="modal fade" id="detailsModal" tabindex="-1" aria-labelledby="detailsModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="detailsModalLabel">Detalles</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <img id="modalImage" src="" class="img-fluid mb-3" alt="Imagen">
                            <h4 id="modalTitle" class="fw-bold"></h4>
                            <p id="modalDescription"></p>
                            <p id="modalExtraInfo" class="text-muted"></p>
                            <a href="#" id="modalActionButton" class="btn btn-primary mt-3"
                                style="display: none;">Acción</a>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Script for Search and Filter (already added)
        const searchInput = document.getElementById('workshopSearch');
        const categoryFilter = document.getElementById('workshopCategoryFilter');
        const dateFilter = document.getElementById('workshopDateFilter');
        const workshopList = document.getElementById('workshopList');
        const workshopCards = workshopList.querySelectorAll('.col-md-6.col-lg-4.mb-4'); // Select the card containers

        function filterWorkshops() {
            const searchTerm = searchInput.value.toLowerCase();
            const selectedCategory = categoryFilter.value;
            const selectedDate = dateFilter.value;

            workshopCards.forEach(card => {
                const title = card.getAttribute('data-title') ? card.getAttribute('data-title').toLowerCase() : '';
                const description = card.getAttribute('data-description') ? card.getAttribute('data-description').toLowerCase() : '';
                const category = card.getAttribute('data-category');
                const date = card.getAttribute('data-date');

                const matchesSearch = title.includes(searchTerm) || description.includes(searchTerm);
                const matchesCategory = selectedCategory === 'all' || (category && category === selectedCategory);
                const matchesDate = selectedDate === 'all' || (date && date === selectedDate);

                if (matchesSearch && matchesCategory && matchesDate) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        if (searchInput) searchInput.addEventListener('input', filterWorkshops);
        if (categoryFilter) categoryFilter.addEventListener('change', filterWorkshops);
        if (dateFilter) dateFilter.addEventListener('change', filterWorkshops);

        // Script for Details Modal
        const detailsModal = document.getElementById('detailsModal');
        if (detailsModal) {
            detailsModal.addEventListener('show.bs.modal', function (event) {
                // Button that triggered the modal
                const button = event.relatedTarget;

                // Extract info from data-bs-* attributes
                const type = button.getAttribute('data-type');
                const image = button.getAttribute('data-image');
                const title = button.getAttribute('data-title');
                const description = button.getAttribute('data-description');
                const extraInfoLabel = button.getAttribute('data-extra-info-label');
                const extraInfoValue = button.getAttribute('data-extra-info-value');
                const actionLink = button.getAttribute('data-action-link'); // For webinars/workshops signup

                // Update the modal's content.
                const modalTitle = detailsModal.querySelector('#modalTitle');
                const modalImage = detailsModal.querySelector('#modalImage');
                const modalDescription = detailsModal.querySelector('#modalDescription');
                const modalExtraInfo = detailsModal.querySelector('#modalExtraInfo');
                const modalGeneralTitle = detailsModal.querySelector('.modal-title');
                const modalActionButton = detailsModal.querySelector('#modalActionButton');

                // Set modal general title based on type
                if (type === 'course') modalGeneralTitle.textContent = 'Detalles de Curso';
                else if (type === 'resource') modalGeneralTitle.textContent = 'Detalles de Recurso';
                else if (type === 'workshop') modalGeneralTitle.textContent = 'Detalles de Taller';
                else if (type === 'webinar') modalGeneralTitle.textContent = 'Detalles de Webinar';
                else modalGeneralTitle.textContent = 'Detalles';


                modalTitle.textContent = title;
                modalDescription.textContent = description;

                if (image) {
                    modalImage.src = image;
                    modalImage.style.display = 'block';
                } else {
                    modalImage.style.display = 'none';
                }

                if (extraInfoLabel && extraInfoValue) {
                    modalExtraInfo.textContent = extraInfoLabel + ': ' + extraInfoValue;
                    modalExtraInfo.style.display = 'block';
                } else {
                    modalExtraInfo.style.display = 'none';
                }

                // Handle action button based on type
                if (type === 'resource') {
                    modalActionButton.textContent = 'Descargar Recurso';
                    const downloadLink = button.getAttribute('data-download-link');
                    if (downloadLink) {
                        modalActionButton.href = downloadLink;
                        modalActionButton.style.display = 'block';
                        modalActionButton.removeAttribute('download'); // Remove download attribute for links that are not direct downloads
                    } else {
                        modalActionButton.style.display = 'none';
                    }
                    modalActionButton.setAttribute('target', '_blank'); // Open download links in new tab

                } else if (type === 'course' || type === 'workshop' || type === 'webinar') {
                    modalActionButton.textContent = 'Inscribirse / Ver Más'; // Generic text, can be refined
                    if (actionLink) {
                        modalActionButton.href = actionLink;
                        modalActionButton.style.display = 'block';
                        modalActionButton.removeAttribute('download');
                    } else {
                        modalActionButton.style.display = 'none';
                    }
                    modalActionButton.setAttribute('target', '_blank'); // Open related links in new tab
                }
                else {
                    modalActionButton.style.display = 'none'; // Hide button for unknown types
                }

            });
        }
    });
</script>